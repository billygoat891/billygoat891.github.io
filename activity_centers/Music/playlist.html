<HTML>

    <HEAD>
        <LINK REL="stylesheet" TYPE="text/css" HREF="music.css"></LINK>
        <TITLE>CD Home Page</TITLE>

        <SCRIPT SRC="musicctr.js">
        </SCRIPT>
    </HEAD>
    
 <!--  SCRIPT functions specific to Playlist -->
 <SCRIPT SRC="playlist.js">
 </SCRIPT>
    
 <SCRIPT DEFER>
    var s_iSelected = -1; //This is a zero based index of the track selected.
    var s_CurList = null;
    var s_fDirty = false;
    var s_player = null;

    function CDPlaylistInit()
    {
            s_player = external.Property("Player");
            //Check to see if we already have the current CD playlist        
            if(s_CurList == null)
                s_CurList = s_player.GetCDPlaylist(s_player.CurrentCD);
            //Initialize the listbox with the items in the playlist
            if(s_CurList != null)
                InitListBoxWithPlaylist(s_CurList);
    }
    
    // Initialization function!
    function Init()
    {
        s_iSelected = -1;
        s_CurList = null;
        s_fDirty = false;
        s_player = null;
    }

    function Playlist_SetButtonStates()
    {
/******* THIS IS COMMENTED OUT BECAUSE WE HAVE PAINTING PROBLEMS WHILE ENABLE DISABLE BUTTONS ***
        if(s_iSelected == -1)
        {
            //Nothing is selected.
            btnMoveUp.disabled = true;
            btnMoveDown.disabled = true;
            btnRemove.disabled = true;
            btnRepeat.disabled = true;
        }
        else
        {
            //Something is selected.
            //Enable the Remove button.
            btnRemove.disabled = false;
            //Enable the Repeat button.
            btnRepeat.disabled = false;
            
            // READ_WRITE_CDPLAYLIST  BUG; So, diable this code
            //If first track is selected, disable move up!
            if(s_iSelected > 0)
                btnMoveUp.disabled = false;
            else
                btnMoveUp.disabled = true;
                
            //If the last track is selected, disable movedown!
            if(s_iSelected < (s_CurList.Tracks -1))
                btnMoveDown.disabled = false;
            else
                btnMoveDown.disabled = true;
        }
        
        if(s_fDirty)
        {
            btnSave.disabled = false;
            btnCancel.disabled = false;
            s_fDirty = false;
        }
********/
    }

function SaveCDPlaylist()
{
    s_CurList.Save("");
}

function Playlist_RestoreOriginal()
{
    s_player = external.Property("Player");
    s_CurList = s_player.GetOriginalCDPlaylist(0);
    InitListBoxWithPlaylist(s_CurList);
    s_iSelected = -1;
    s_fDirty = false;
    Playlist_SetButtonStates();
}
 
 </SCRIPT>
    
<BODY SCROLL="no" STYLE="MARGIN: 0px" ONLOAD="Init();CDPlaylistInit()">
    <DIV CLASS="bottomleftimage">
    <TABLE CLASS="fullpage" ONRESIZE="PositionPlayer();">
        <TR STYLE="WIDTH:100%;">
            <TD CLASS="aligntop" STYLE="WIDTH:100%;">
                <TABLE STYLE="WIDTH:100%;">
                    <!-- padding on the left and top -->
                    <TR STYLE="height: 25px;">
                        <TD STYLE="width: 46px;">
                        </TD>
                    </TR>
                    <TR CLASS="rowaboveplayer">
                        <!-- skip the column -->
                        <TD>
                        </TD>
                        <TD>
                            <TABLE>
                                <TR>
                                    <TD>
                                        <SPAN CLASS="commandtitle"><ID id="change_your">Change your playlist for this CD</ID>
                                        </SPAN>
                                        <BR>
                                    </TD>
                                </TR>
                                <TR  STYLE="height:15px">
                                    <TD>
                                    </TD>
                                </TR>
                                <TR>
                                    <TD>
                                        <TABLE>
                                            <TD valign="top" STYLE="WIDTH:30%">
                                                <TABLE>
                                                    <TR>
                                                        <TD>
                                                            <SPAN CLASS="instructiontext">
                                                                <ID  ID="Play_a_CD_the_way">Play a CD the way you want. You can change the order of the tracks. You can also remove or repeat tracks.</ID>
                                                            </SPAN>
                                                        </TD>
                                                    </TR>
                                                    <TR STYLE="height:30px">
                                                        <TD>
                                                        </TD>
                                                    </TR>
                                                    <TR>
                                                        <TD>
                                                            <SPAN CLASS="smallinstructionstitle"><ID ID="youcanalso">You can also:</ID></SPAN><BR>
                                                            <SPAN CLASS="alsotext"><A id="link_play_a_cd" ONCLICK="return GoTo('CD')" HREF=""><ID ID="Play_a_CD">Play a CD</ID></A><BR>
                                                                <A id="link_record_cds" ONCLICK="return GoTo('CDRecord')" HREF=""><ID ID="Record_CDs">Record from CDs</ID></A></SPAN><BR>
                                                            <SPAN>
                                                                <A id="customize_the_player" CLASS="alsotextdisabled" ONCLICK="return GoTo('')" HREF=""><ID ID="Customize_the_player">Customize the player</ID></A>
                                                            </SPAN>
                                                        </TD>
                                                    </TR>
                                                </TABLE>
                                            </TD>
                                            <TD>
                                                <TABLE>
                                                    <TR>
                                                        <td width=40%>
                                                            <DIV ID=PlaylistBox CLASS="ListBox" onclick="Playlist_OnClick();">CD Playlist</DIV>
                                                        </td>
                                                        <td width=23%>
                                                            <TABLE>
                                                                <TD STYLE="WIDTH:15px">
                                                                </TD>
                                                                <TD>
                                                                    <SPAN CLASS="verysmallinstructions">
                                                                           <ID id=buttoninstruction>Click a track in the playlist, then click the option you want.</ID>
                                                                    </SPAN>
                                                                    <DIV ID="Tools" align="center">
                                                                       <BR>
                                                                       <BUTTON id=btnMoveUp CLASS="PLBUTTON"  OnClick="Playlist_MoveUp(s_iSelected)" >Move up in playlist</BUTTON>
                                                                       <BR>
                                                                       <BR>
                                                                       <BUTTON id=btnMoveDown CLASS="PLBUTTON"  OnClick="Playlist_MoveDown(s_iSelected)" >Move down in playlist</BUTTON>
                                                                       <BR>
                                                                       <BR>
                                                                       <BUTTON id=btnRemove CLASS="PLBUTTON"  OnClick="Playlist_RemoveTrack(s_iSelected)">Remove from playlist</BUTTON>
                                                                       <BR>
                                                                       <BR>
                                                                       <BUTTON id=btnRepeat CLASS="PLBUTTON"  OnClick="Playlist_RepeatTrack(s_iSelected)">Repeat in playlist</BUTTON>
                                                                       <BR>
                                                                       <BR>
                                                                       <BUTTON id=btnRestore CLASS="PLBUTTON" OnClick="Playlist_RestoreOriginal()">Restore original playlist</BUTTON>
                                                                    </DIV>
                                                                </TD>
                                                                <TD STYLE="WIDTH:15px">
                                                                </TD>
                                                            </TABLE>
                                                        </td>
                                                    </TR>
                                                    <TR>
                                                        <!-- The Total playback time cell -->
                                                        <TD width = 30% valign="top" COLSPAN=2>
                                                            <SPAN CLASS="alsotextdisabled"><ID id="TotalPlayback">Total playback time:</ID><SPAN ID="PlaybackTime"></SPAN></SPAN>
                                                        </TD>
                                                    </TR>
                                                    <TR STYLE="HEIGHT:15px">
                                                        <TD>
                                                        </TD>
                                                    </TR>
                                                    <TR >
                                                        <!-- The Save and cancel buttons  -->
                                                        <TD width = 16% COLSPAN=2>
                                                            <BUTTON ID="btnSave"  ONCLICK="SaveCDPlaylist();return GoTo('CD');">Save Playlist</BUTTON>
                                                            <BUTTON ID="btnCancel"  ONCLICK="return GoTo('CD')">Cancel</BUTTON>
                                                        </TD>
                                                    </TR>
                                                </TABLE>
                                            </TD>                   
                                        </TABLE>
                                    </TD>
                                </TR>
                            </TABLE>
                        </TD>
                    </TR>
                </TABLE>
            </TD>
        </TR>
        <TR>
            <TD>
                <DIV ID=Master CLASS="playercell">
                </DIV>
            </TD>
        </TR>
    </TABLE>
</BODY>

</HTML>

